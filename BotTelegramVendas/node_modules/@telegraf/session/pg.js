"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Postgres = void 0;
const kysely_1 = require("kysely");
const pg_1 = require("pg");
const kysely_2 = require("./kysely");
function Postgres(opts) {
    return (0, kysely_2.KyselyStore)({
        config: "pool" in opts
            ? { dialect: new kysely_1.PostgresDialect({ pool: opts.pool }) }
            : {
                dialect: new kysely_1.PostgresDialect({
                    pool: new pg_1.Pool({
                        host: opts.host,
                        port: opts.port,
                        database: opts.database,
                        user: opts.user,
                        password: opts.password,
                        ...opts.config,
                    }),
                }),
            },
        table: opts.table,
        onInitError: opts.onInitError,
    });
}
exports.Postgres = Postgres;
