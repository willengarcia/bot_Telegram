"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MySQL = void 0;
const kysely_1 = require("kysely");
const mysql2_1 = require("mysql2");
const kysely_2 = require("./kysely");
function MySQL(opts) {
    return (0, kysely_2.KyselyStore)({
        config: "pool" in opts
            ? { dialect: new kysely_1.MysqlDialect({ pool: opts.pool }) }
            : {
                dialect: new kysely_1.MysqlDialect({
                    pool: (0, mysql2_1.createPool)({
                        host: opts.host,
                        port: opts.port,
                        database: opts.database,
                        user: opts.user,
                        password: opts.password,
                        ...opts.config,
                    }),
                }),
            },
        table: opts.table,
        onInitError: opts.onInitError,
    });
}
exports.MySQL = MySQL;
